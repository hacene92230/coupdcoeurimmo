{% extends 'base.html.twig' %}

{% block title %}Accueil
	{{ parent() }}
{% endblock %}

{% block body %}
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<h1 class="text-center mb-5 text-primary">Coupdcoeurimmo</h1>
				<p class="lead">
					Bienvenue au sein de notre agence immobilière conviviale et familiale où chaque client est traité avec une attention particulière. Nous sommes fiers de fournir des services immobiliers de qualité supérieure dans un environnement chaleureux et accueillant. Notre équipe de professionnels passionnés par leur métier travaille en étroite collaboration avec nos clients pour répondre à leurs besoins spécifiques.
				</p>
				<p class="text-secondary">
					Nous sommes là pour vous guider à chaque étape de votre parcours immobilier, que vous cherchiez à vendre, acheter ou louer une propriété. Chez nous, chaque client est important et nous sommes déterminés à vous offrir un service personnalisé et sur mesure. Nous sommes à l'écoute de vos besoins et préférences, travaillant en collaboration avec vous pour vous aider à réaliser vos rêves immobiliers. Notre agence immobilière s'engage à fournir des services professionnels de haute qualité, accordant une attention particulière aux détails. Nous croyons que notre approche personnalisée et attentive est la clé de notre succès, et nous sommes passionnés par notre métier.
				</p>
				<p class="text-secondary">
					Nous sommes impatients de vous aider à réaliser vos rêves immobiliers, alors n'hésitez pas à nous contacter dès aujourd'hui pour découvrir comment nous pouvons vous aider. Nous sommes à votre disposition pour répondre à toutes vos questions pour vous aider à trouver la propriété de vos rêves.
				</p>
				<p class="text-muted">
					Contactez-nous dès maintenant pour en savoir plus sur nos services immobiliers et pour trouver la propriété de vos rêves.
				</p>
			</div>
		</div>
	</div>


{% for property in properties %}
    <div class="card bordered">
        <h2>{{ property.title }}</h2>
{% if property.images|length > 0 %}
  <div id="carousel-{{ property.id }}" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      {% for image in property.images %}
        <li data-target="#carousel-{{ property.id }}" data-slide-to="{{ loop.index0 }}" {% if loop.first %} class="active" {% endif %}></li>
      {% endfor %}
    </ol>
    <div class="carousel-inner carousel-fade">
      {% for image in property.images %}
        <div class="carousel-item {% if loop.first %}active{% endif %}">
          <img src="{{ vich_uploader_asset(image, 'imageFile') }}" class="d-block w-100 animate__animated animate__fadeIn" alt="{{ 'Image ' ~ loop.index0 ~ ' de ' ~ property.title }}">
        </div>
      {% endfor %}
    </div>
  </div>
{% endif %}

        <div class="col-md-12 text-center mt-3">
            <!-- Button that triggers the modal -->
            <button type="button" id="btnModal{{ loop.index }}" class="btn btn-primary" data-toggle="modal" data-target="#myModal{{ loop.index }}" aria-label="Voir {{ property.title }}">
                Voir
            </button>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="myModal{{ loop.index }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel{{ loop.index }}" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h5 class="modal-title" id="myModalLabel{{ loop.index }}">{{ property.title }}</h5>
                    </div>
                    <div class="modal-body">
                        <div class="border p-3">
                            <h2 class="font-weight-bold">Description</h2>
                            <p>{{ property.content }}</p>
                        </div>
                        <div class="border p-3">
                            <h2 class="font-weight-bold">Category</h2>
                            <p>{{ property.category.name }}</p>
                        </div>
                        <div class="border p-3">
                            <h2 class="font-weight-bold">Date added</h2>
                            <p>{{ property.createdAt|date("d/m/Y") }}</p>
                        </div>

<div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title mb-4">Caractéristiques</h4>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Propriétaire :
                                <span class="badge bg-secondary rounded-pill"> {{ property.user.name }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Nombre de pièces : 
                                <span class="badge bg-secondary rounded-pill">{{ property.roomNumber }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Loyer : 
                                <span class="badge bg-secondary rounded-pill">{{ property.rent }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Prix : 
                                <span class="badge bg-secondary rounded-pill">{{ property.price ? "aucun" }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Ce bien dispose d'un jardin : 
                                <span class="badge bg-secondary rounded-pill">{{ property.garden ? 'Oui' : 'Non' }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Type du logement : 
                                <span class="badge bg-secondary rounded-pill">{{ property.housingType == 'house' ? "Maison" : "Appartement" }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Type de transaction : 
                                <span class="badge bg-secondary rounded-pill">{{ property.category.name }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Date de création : 
                                <span class="badge bg-secondary rounded-pill">{{ property.createdAt|date('d/m/Y') }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Ville : 
                                <span class="badge bg-secondary rounded-pill">{{ property.address.city }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Chauffage : 
                                <span class="badge bg-secondary rounded-pill">{{ property.heating }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Année de construction : 
                                <span class="badge bg-secondary rounded-pill">{{ property. yearBuilt|date('d/m/Y') }}</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endfor %}

	<nav aria-label="Page">
		<ul class="pagination pagination-lg justify-content-center shadow">
			{% if current_page > 1 %}
				<li class="page-item">
					<a class="page-link" href="{{ path('app_home', {'page': current_page-1}) }}" aria-label="Previous">
						<i class="fas fa-angle-left"></i>
						<span class="sr-only">Previous</span>
					</a>
				</li>
			{% endif %}

			{% for page in 1..total_pages %}
				<li class="page-item {% if page == current_page %} active {% endif %}">
					<a class="page-link" href="{{ path('app_home', {'page': page}) }}">{{ page }}</a>
				</li>
			{% endfor %}

			{% if current_page < total_pages %}
				<li class="page-item">
					<a class="page-link" href="{{ path('app_home', {'page': current_page+1}) }}" aria-label="Next">
						<i class="fas fa-angle-right"></i>
						<span class="sr-only">Next</span>
					</a>
				</li>
			{% endif %}
		</ul>
	</nav>
{% endblock %}
